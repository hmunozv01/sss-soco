@model  SolicitudSoporteSistemas_prd.Models.CabeceraSSS

@{
    ViewBag.Title = "CrearSSS";
    Layout = "~/Views/Shared/_LayoutSS.cshtml";
}



<div class="col-md-12">
    <div class="card">
        <div class="card-header" data-background-color="purple">
            <h4 class="title">Solicitud Soporte Sistemas</h4>
            <p class="category">Favor completar datos faltantes del formulario para la creación RÁPIDA de una solicitud </p>
        </div>
        <div class="card-content">

            @using (Html.BeginForm("CrearSSS", "SS", FormMethod.Post, new { onsubmit = "return validateFormCrearSSS()" }))
            {

                @*<form id="crearsolicitudsoportesistemas" action="" onsubmit="return validateFormCrearSSS()">*@

                <!-- Izquierda -->
                <div class="col-md-6">

                    <!--Solicitante-->

                    <div class="card">
                        <div class="card-title">
                            <div class="icon-bar">
                                <a href="#">
                                    <i class="material-icons">person</i> Solicitante
                                </a>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group label-floating" id="divsolicitanteemail">
                                        @Html.LabelFor(model => model.SolicitanteEmail, htmlAttributes: new { @class = "control-label" })
                                        @Html.EditorFor(model => model.SolicitanteEmail, new { htmlAttributes = new { @class = "form-control typeahead", @id = "solicitanteemailid" } })
                                        @*@Html.ValidationMessageFor(model => model.Cabecera.SolicitanteEmail, "", new { @class = "text-danger" })*@
                                        <span id="solicitanteemailid_error1" style="display: none;">Campo Obligatorio</span>
                                        <span id="solicitanteemailid_error2" style="display: none;">Favor incorporar e-mail válido</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group label-floating controls" id="divubicacionsss">
                                        @Html.LabelFor(model => model.UbicacionNombre, htmlAttributes: new { @class = "control-label" })
                                        @Html.EditorFor(model => model.UbicacionNombre, new { htmlAttributes = new { @class = "form-control typeahead", @id = "crearsss_ubicacionid" } })
                                        @*@Html.ValidationMessageFor(model => model.Cabecera.SolicitanteEmail, "...", new { @class = "error" })*@
                                        <span id="crearsss_ubicacionid_error1" style="display: none;">Campo Obligatorio</span>
                                        <span id="crearsss_ubicacionid_error2" style="display: none;">Favor incorporar carácteres válidos</span>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!--Tecnico-->

                    <div class="card">
                        <div class="card-title">
                            <div class="icon-bar">
                                <a href="#">
                                    <!--<img class="img" src="../assets/img/faces/marc.jpg" />-->
                                    <i class="material-icons">person_outline</i> Asignado a (opcional)
                                </a>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group label-floating controls" id="divasignadoemail">
                                        @Html.LabelFor(model => model.AsignadoAEmail, htmlAttributes: new { @class = "control-label" })
                                        @Html.EditorFor(model => model.AsignadoAEmail, new { htmlAttributes = new { @class = "form-control typeahead", @id = "asignadoemailid" } })
                                        @*@Html.ValidationMessageFor(model => model.Cabecera.SolicitanteEmail, "", new { @class = "text-danger" })*@
                                        <span id="asignadoemailid_error" style="display: none;">Favor incorporar e-mail válido</span>
                                    </div>
                                </div>
                            </div>
                            @*<div class="row">
                                    <div class="col-md-5">
                                        <div class="form-group label-floating controls" id="divcuentatecnico">
                                            <label class="control-label">Cuenta Técnico</label>
                                            <input type="text" id="cuentatecnicoid" name="cuentatecnico" class="form-control typeahead" placeholder="">
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <div class="form-group label-floating">
                                            <label class="control-label">@@</label>
                                            <input type="text" class="form-control" disabled>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group label-floating" id="divempresa">
                                            <label class="control-label">Empresa</label>
                                            <input type="text" id="empresatecnicoid" name="empresatecnico" class="form-control typeahead">
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <div class="form-group label-floating">
                                            <label class="control-label">.cl</label>
                                            <input type="text" class="form-control" disabled>
                                        </div>
                                    </div>
                                </div>*@
                        </div>
                    </div>

                    <!--Documentos -->
                    @*<div class="card">
                            <div class="card-title">
                                <div class="icon-bar">
                                    <a href="#">
                                        <i class="material-icons">file_upload</i> Documentos (opcional)
                                    </a>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="row">
                                        <div class="col-md-8">
                                            <div class="input-group">
                                                <label class="input-group-btn ">
                                                    <span class="btn btn-file">
                                                        Buscar&hellip; <input type="file" style="display: none;" multiple>
                                                    </span>
                                                </label>
                                                <input type="text" class="form-control" disabled>
                                            </div>
                                        </div>
                                </div>
                            </div>
                        </div>*@

                </div>

                <!-- Derecha -->
                <div class="col-md-6">

                    <!--Detalle-->

                    <div class="card">
                        <div class="card-title">
                            <div class="icon-bar">
                                <a href="#">
                                    <!--<img class="img" src="../assets/img/faces/marc.jpg" />-->
                                    <i class="material-icons">description</i> Detalle
                                </a>
                            </div>
                        </div>
                        <div class="card-content">
                            @*<div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Estado</label>
                                            <input type="text" class="form-control" disabled>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="dropdown ">
                                            <button id="crearsss_estado_button" type="button" class="dropdown-toggle btn btn-default" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" placeholder="">
                                                <span class="caret"></span>
                                            </button>
                                            <ul id="crearsss_estado_ul" name="EstadoId" class="dropdown-menu" aria-labelledby="estado" placeholder="">
                                                <li class="dropdown-header">Estado</li>
                                                @foreach (EstadoSolicitud es in ViewBag.EstadosSolicitud)
                                                {
                                                    if (es.EstadoSolicitudId == 1)
                                                    {
                                                        <li id="crearsss_estado_li" class="active"><a href="#">@es.NombreEstado</a></li>
                                                    }
                                                    else
                                                    {
                                                        <li id="@es.EstadoSolicitudId"><a href="#">@es.NombreEstado</a></li>
                                                    }
                                                }
                                            </ul>
                                            <span id="crearsss_estado_ul_error" style="display: none;">Campo Obligatorio</span>
                                        </div>
                                    </div>
                                </div>*@

                            @*<div class="row">

                                    <div class="dropdown ">
                                        @{
                                            var listItems1 = new List<SelectListItem>()
                                                            {
                                                                new SelectListItem {Text = "EstadoNuevo1",   Value = "70"},
                                                                new SelectListItem {Text = "EstadoNuevo2", Value = "80"}
                                                            };
                                            @Html.DropDownListFor(model => model.EstadoId, listItems1, "Opciones", new { @class = "dropdown-menu" })
                                        }
                                    </div>
                                </div>*@

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group label-floating">
                                        @Html.LabelFor(model => model.Referencia, htmlAttributes: new { @class = "control-label" })
                                        @Html.EditorFor(model => model.Referencia, new { htmlAttributes = new { @class = "form-control", @id = "referenciaid" } })
                                        @*@Html.ValidationMessageFor(model => model.Cabecera.SolicitanteEmail, "", new { @class = "text-danger" })*@
                                        <span id="referenciaid_error" style="display: none;">Campo Obligatorio</span>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group label-floating">
                                        <label class="control-label">Estado</label>
                                        <input type="text" class="form-control" disabled>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="dropdown ">
                                        @Html.DropDownListFor(model => model.EstadoId, new SelectList(ViewBag.EstadosSolicitud, "EstadoSolicitudId", "NombreEstado", Model.EstadoId), new { @class = "form-control", @id = "crearsss_estadoid" })
                                        <span id="crearsss_estadoid_error" style="display: none;">Favor seleccionar Estado</span>

                                    </div>
                                </div>
                            </div>


                            @*<div class="col-md-4 text-right">
                                    <div class="form-group label-floating">
                                    </div>
                                        </div>


                                 @*<div class="col-md-4">
                                    <div class="dropdown ">
                                        @{
                                        var listItems = new List<SelectListItem>()
                                        {
                                            new SelectListItem {Text = "EstadoNuevo1",   Value = "70"},
                                            new SelectListItem {Text = "EstadoNuevo2", Value = "80"}
                                        };
                                        @Html.DropDownListFor(m => m.Cabecera.EstadoId, listItems, "-- Please select --", new { @class = "dropdown dropdown-toggle btn btn-default dropdown-menu" })
                                        }
                                    </div>
                                </div>*@
                            @*<div class="col-md-4 text-right">
                                    <div class="form-group label-floating">
                                    </div>
                                </div>*@

                            @*<div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group label-floating">
                                            <label class="control-label">Tipo Solicitud</label>
                                            <input type="text" class="form-control" disabled>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="dropdown ">
                                            <button id="crearsss_tiposolicitud_button" type="button" class="dropdown-toggle btn btn-default" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" placeholder="">
                                                Tipo Solicitud <span class="caret"></span>
                                            </button>
                                            <ul id="crearsss_tiposolicitud_ul" class="dropdown-menu" aria-labelledby="tiposolicitud" placeholder="">
                                                <li class="dropdown-header">Tipo Solicitud</li>

                                                @foreach (TipoSolicitud ts in ViewBag.TiposSolicitud)
                                                {
                                                    //<p>@e.NombreSolicitud</p>
                                                    <li id="@ts.TipoSolicitudId"><a href="#">@ts.NombreSolicitud</a></li>
                                                }

                                            </ul>
                                            <span id="crearsss_tiposolicitud_ul_error" style="display: none;">Campo Obligatorio</span>
                                        </div>
                                    </div>
                                </div>*@

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group label-floating">
                                        <label class="control-label">Tipo Solicitud</label>
                                        <input type="text" class="form-control" disabled>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="dropdown ">
                                        @Html.DropDownListFor(model => model.TipoSolicitudId, new SelectList(ViewBag.TiposSolicitud, "TipoSolicitudId", "NombreSolicitud"), "Seleccione Tipo", new { @class = "form-control", @id = "crearsss_tiposolicitudid" })
                                        <span id="crearsss_tiposolicitudid_error" style="display: none;">Favor seleccionar Tipo Solicitud</span>
                                    </div>
                                </div>
                            </div>

                            @*<div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group label-floating">
                                            <div class="checkbox">
                                               <label>
                                                    <input type="checkbox" class="pull-right" id="incidenteid"> ¿Es incidente?
                                                </label>

                                            </div>
                                        </div>
                                    </div>
                                </div>*@


                            <div class="row">
                                <div class="col-md-2 text-center">
                                    @Html.CheckBoxFor(m => m.Incidente, new { @class = "" })
                                </div>
                                <div class="col-md-4 text-left">
                                    @Html.LabelFor(m => m.Incidente, new { @class = "" })
                                    @*@Html.DisplayTextFor(m => m.Incidente)*@                      @*Muestra true o false*@
                                </div>
                            </div>

                            @*<div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group label-floating controls">
                                            <label class="control-label">Descripción</label>
                                            <textarea class="form-control" rows="5" id="descripcionid" name="descripcion" placeholder=""></textarea>
                                        </div>
                                    </div>
                                </div>*@
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group label-floating controls">
                                        @Html.LabelFor(model => model.Descripcion, htmlAttributes: new { @class = "control-label" })
                                        @Html.TextAreaFor(model => model.Descripcion, new { @class = "form-control", @id = "crearsss_descripcionid", @rows = 5, @maxlength = 350 })
                                        <span id="crearsss_descripcionid_error" style="display: none;">Favor incorporar Descripción</span>
                                        <span id="sss_caracteres" style="color:gray">0 de 350 caracteres usados</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                //if (!string.IsNullOrEmpty(ViewBag.Result))
                //{
                //    Html.DisplayName((string)ViewBag.Result);
                //}


                // tipo cabeceraSSS
                //@Html.HiddenFor(m => m.SolicitudId)

                //@Html.HiddenFor(m => m.TipoSolicitudId)
                @Html.HiddenFor(m => m.TipoSolicitudNombre)
                @Html.HiddenFor(m => m.EmpresaId)
                @Html.HiddenFor(m => m.EmpresaNombre)
                @Html.HiddenFor(m => m.UbicacionId)
                //@Html.HiddenFor(m => m.UbicacionNombre)
                //@Html.HiddenFor(m => m.Proyecto)
                //@Html.HiddenFor(m => m.Direccion)
                //@Html.HiddenFor(m => m.Incidente)
                @Html.HiddenFor(m => m.AsignadoAId)
                @Html.HiddenFor(m => m.AsignadoANombre)
                @Html.HiddenFor(m => m.AsignadoAEmail)
                @Html.HiddenFor(m => m.SolicitanteIdRed)
                @Html.HiddenFor(m => m.SolicitanteId)
                @Html.HiddenFor(m => m.SolicitanteNombre)
                //@Html.HiddenFor(m => m.SolicitanteEmail)
                @Html.HiddenFor(m => m.CategoriaId)
                @Html.HiddenFor(m => m.CategoriaNombre)
                @Html.HiddenFor(m => m.SubCategoriaId)
                @Html.HiddenFor(m => m.SubCategoriaNombre)
                @Html.HiddenFor(m => m.HorasTotal)
                //@Html.HiddenFor(m => m.Descripcion)
                //@Html.HiddenFor(m => m.EstadoId)
                @Html.HiddenFor(m => m.EstadoNombre)
                @Html.HiddenFor(m => m.EstadoTipo)
                //@Html.HiddenFor(m => m.FechaCreacion)
                @Html.HiddenFor(m => m.FechaSolicitada)
                @Html.HiddenFor(m => m.FechaComprometida)
                //@Html.HiddenFor(m => m.FechaResolucion)


                @*//@Html.HiddenFor(m => m.SolicitudId)

                    @Html.HiddenFor(m => m.EmpresaId)
                    @Html.HiddenFor(m => m.usuario)
                    @Html.HiddenFor(m => m.fecha_creacion)
                    @Html.HiddenFor(m => m.fecha_solicitud)
                    @Html.HiddenFor(m => m.fecha_resolucion)
                    @Html.HiddenFor(m => m.fecha_comprometida)
                    @Html.HiddenFor(m => m.EstadoSolicitudId)                   // cargar del dropbox
                    @Html.HiddenFor(m => m.TipoSolicitudId)                     // cargar del dropbox
                    @Html.HiddenFor(m => m.SolicitanteIdRed)

                    @Html.HiddenFor(m => m.Direccion)
                    @Html.HiddenFor(m => m.PersonalId)
                    @Html.HiddenFor(m => m.Telefono)
                    @Html.HiddenFor(m => m.Obra)
                    @Html.HiddenFor(m => m.Horas)
                    @Html.HiddenFor(m => m.CategoriaSolicitudId)
                    @Html.HiddenFor(m => m.EsIncidente)                          // cargar del dropbox
                    @Html.HiddenFor(m => m.SubCategoriaId)*@

                <button type="submit" id="submit" name="submit" value="CrearSSS" class="btn btn-primary pull-right">Crear Solicitud</button>
                <div class="clearfix"></div>

                @*</form>*@
            }
        </div>
    </div>
</div>



@*@{string emailcta = string.Empty;}
    @foreach (mesadeservicios_des.Areas.soportesistemas.Models.UsuarioSSS per in ViewBag.Cuentas)
    {
        emailcta = emailcta + "'" + per.email + "', ";
    }
    @{emailcta = emailcta.TrimEnd(' ');}
    @{emailcta = emailcta.TrimEnd(',');}

    <textarea class="form-control" rows="1" id="crearssssolicitanteid" name="crearssssolicitante" placeholder="">@emailcta</textarea>
    <textarea class="form-control" rows="1" id="crearsssasignadoid" name="crearsssasignado" placeholder="">@emailcta</textarea>*@

@{string stringcuentas = string.Empty;}
@{stringcuentas = ViewBag.StringCuentas;}

<textarea class="form-control" rows="1" id="listacuentasid" name="listacuentas" placeholder="">@stringcuentas</textarea>
@*<textarea class="form-control" rows="1" id="crearsssasignadoid" name="crearsssasignado" placeholder="">@stringcuentas</textarea>*@


@*@{string crearObraSalaVenta = string.Empty;}
    @foreach (ObraSalaVenta osv in ViewBag.ListaObraSalaVenta)
    {
        crearObraSalaVenta = crearObraSalaVenta + "'" + osv.NombreObraSalaVenta + "', ";
    }
    @{crearObraSalaVenta = crearObraSalaVenta.TrimEnd(' ');}
    @{crearObraSalaVenta = crearObraSalaVenta.TrimEnd(',');}
    <textarea class="form-control" rows="1" id="crearobrasalaventaid" name="crearobrasalaventa" placeholder="">@crearObraSalaVenta</textarea>*@

@{string stringObraSalaVenta = string.Empty;}
@{stringObraSalaVenta = ViewBag.StringObraSalaVenta;}

<textarea class="form-control" rows="1" id="listaubicacionesid" name="listaubicaciones" placeholder="">@stringObraSalaVenta</textarea>


@{string stringsolicitantes = string.Empty;}
@{stringsolicitantes = ViewBag.StringSolicitantes;}

<textarea class="form-control" rows="1" id="listasolicitantesid" name="listasolicitantes" placeholder="">@stringsolicitantes</textarea>
